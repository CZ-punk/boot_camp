week_1 homeWork

1ë²ˆ

ğŸ‘‰ ìˆ˜ê°•ìƒì„ ê´€ë¦¬í•˜ëŠ” MANAGER í…Œì´ë¸”ì„ ë§Œë“¤ì–´ë³´ì„¸ìš”.

- ì»¬ëŸ¼ì€ ì´ id, name, student_code ì…ë‹ˆë‹¤.
- idëŠ” bigint íƒ€ì…ì´ë©° PKì…ë‹ˆë‹¤.
- nameì€ ìµœì†Œ 2ì ì´ìƒ, varchar íƒ€ì…, not null ì…ë‹ˆë‹¤.
- student_codeëŠ” STUDENT í…Œì´ë¸”ì„ ì°¸ì¡°í•˜ëŠ” FKì´ë©° not null ì…ë‹ˆë‹¤.
- FKëŠ” CONSTRAINT ì´ë¦„ì„ â€˜manager_fk_student_codeâ€™ ë¡œ ì§€ì •í•´ì•¼í•©ë‹ˆë‹¤.

1ë²ˆ ë‹µ

create table if not exists MANAGER (
    id bigint primary key comment 'id',
    name varchar(10) not null comment 'name',
    student_code varchar(100) not null comment 'foreign key',
    constraint check_name_length_2 check ( length(name) >= 2 ),
    foreign key (student_code) references student(student_code)
)


2ë²ˆ 

ALTER, MODIFYë¥¼ ì´ìš©í•˜ì—¬ MANAGER í…Œì´ë¸”ì˜ id ì»¬ëŸ¼ì— AUTO_INCREMENT ê¸°ëŠ¥ì„ ë¶€ì—¬í•˜ì„¸ìš”.

2ë²ˆ ë‹µ

alter table manager modify column id BIGINT NOT NULL  AUTO_INCREMENT;

=> not null êµ³ì´ í•„ìš” ì—†ìŒ. ( column id bigint ë§Œ ìˆì–´ë„ í•„ë“œ ìœ ì¶” ê°€ëŠ¥ )

3ë²ˆ

ğŸ‘‰ INSERTë¥¼ ì´ìš©í•˜ì—¬ ìˆ˜ê°•ìƒ s1, s2, s3, s4, s5ë¥¼ ê´€ë¦¬í•˜ëŠ” 

managerAì™€ s6, s7, s8, s9ë¥¼ ê´€ë¦¬í•˜ëŠ” managerBë¥¼ ì¶”ê°€í•˜ì„¸ìš”.

- AUTO_INCREMENT ê¸°ëŠ¥ì„ í™œìš©í•˜ì„¸ìš”

3ë²ˆ ë‹µ

insert into manager(name, student_code) values ('managerA', 's1');
insert into manager(name, student_code) values ('managerA', 's2');
insert into manager(name, student_code) values ('managerA', 's3');
insert into manager(name, student_code) values ('managerA', 's4');
insert into manager(name, student_code) values ('managerA', 's5');


insert into manager(name, student_code) values ('managerB', 's6');
insert into manager(name, student_code) values ('managerB', 's7');
insert into manager(name, student_code) values ('managerB', 's8');
insert into manager(name, student_code) values ('managerB', 's9');


4ë²ˆ

JOINì„ ì‚¬ìš©í•˜ì—¬ managerAê°€ ê´€ë¦¬í•˜ëŠ” ìˆ˜ê°•ìƒë“¤ì˜ ì´ë¦„ê³¼ ì‹œí—˜ ì£¼ì°¨ ë³„ ì„±ì ì„ ê°€ì ¸ì˜¤ì„¸ìš”.

4ë²ˆ ë‹µ

select m.name, s.name, ex.score from manager m join student s on m.student_code = s.student_code join exam ex on m.student_code = ex.student_code where m.name = 'managerA';


5ë²ˆ

STUDENT í…Œì´ë¸”ì—ì„œ s1 ìˆ˜ê°•ìƒì„ ì‚­ì œí–ˆì„ ë•Œ 

EXAMì— ìˆëŠ” s1ìˆ˜ê°•ìƒì˜ ì‹œí—˜ì„±ì ê³¼ MANAGERì˜ managerAê°€ ê´€ë¦¬í•˜ëŠ” ìˆ˜ê°•ìƒ ëª©ë¡ì— 

ìë™ìœ¼ë¡œ ì‚­ì œë  ìˆ˜ ìˆë„ë¡ í•˜ì„¸ìš”.

- ALTER, DROP, MODIFY, CASCADE ë¥¼ ì‚¬ìš©í•˜ì—¬ EXAM, MANAGER í…Œì´ë¸”ì„ ìˆ˜ì •í•©ë‹ˆë‹¤.

5ë²ˆ ë‹µ

alter table manager add constraint manager_fk_student_code foreign key (student_code) references student(student_code) on delete cascade ;










ì„ ìƒ ì •ë‹µ:

1ë²ˆ

create table if not exists manager 
(
	id bigint primary key,
	
	name varchar(100) not null,
	
	student_code varchar(100) not null,

	constraint manager_fk_student_code foreign key (student_code) references student(student_code)

);


2ë²ˆ

alter table manager modify column id bigint auto_increment;


3ë²ˆ

insert into manager(name, student_code) values ('managerA', 's1');
insert into manager(name, student_code) values ('managerA', 's2');
insert into manager(name, student_code) values ('managerA', 's3');
insert into manager(name, student_code) values ('managerA', 's4');
insert into manager(name, student_code) values ('managerA', 's5');

insert into manager(name, student_code) values ('managerB', 's6');
insert into manager(name, student_code) values ('managerB', 's7');
insert into manager(name, student_code) values ('managerB', 's8');
insert into manager(name, student_code) values ('managerB', 's9');


4ë²ˆ

ìƒëµ




5ë²ˆ

ê¸°ì¡´ constraint ì§€ì›Œì•¼ í•œë‹¤.

alter table exam drop constraint exam_fk_student_code;

alter table exam add constraint exam_fk_student_code foreign key (student_code) 

references student(student_code) on delete cascade;



alter table manager drop constraint manager_fk_student_code;

alter table manager add constraint manager_fk_student_code foreign key (student_code) 

references student(student_code) on delete cascade;
